# 351. Android Unlock Patterns

Backtracking problem, 1357 and 2468 are symmetric, we should build a skip dic.

`class Solution(object):`

    `def numberOfPatterns(self, m, n):`

        `"""`

        `:type m: int`

        `:type n: int`

        `:rtype: int`

        `"""`

        `skip = [[0 for i in range(10)] for j in range(10)]`

        `skip[1][3] = skip[3][1] = 2`

        `skip[1][7] = skip[7][1] = 4`

        `skip[3][9] = skip[9][3] = 6`

        `skip[7][9] = skip[9][7] = 8`

        `skip[1][9] = skip[9][1] = skip[2][8] = skip[8][2] = skip[3][7] = skip[7][3] = skip[4][6] = skip[6][4] = 5`

        ``

        `self.visited = []`

        `count = 0` 

        `for i in range(m,n+1):`

            `self.visited.append(1)`

            `count += self.dfs(skip,1,i-1) * 4`

            `self.visited.pop()`

            `self.visited.append(2)`

            `count += self.dfs(skip,2,i-1) * 4`

            `self.visited.pop()`

            `self.visited.append(5)`

            `count += self.dfs(skip,5,i-1)`

            `self.visited.pop()`

        `return count`

    `def dfs(self,skip,cur,remain):`

        `if remain < 0:`

            `return 0`

        `if remain == 0:`

            `return 1`

        `result = 0`

        ``

        `for i in range(1,10):`         

            `if (i not in self.visited) and (skip [cur][i]== 0 or skip[cur][i] in self.visited):`

                `self.visited.append(i)`

                `result += self.dfs(skip,i,remain-1)`

                `self.visited.pop()`

        `return result`

